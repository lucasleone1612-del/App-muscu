<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Elite Hybrid Training</title>
    
    <!-- PWA Settings -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <link rel="manifest" href='data:application/manifest+json;base64,eyJuYW1lIjoiRWxpdGUgSHlicmlkIFRyYWluaW5nIiwic2hvcnRfbmFtZSI6IkVsaXRlIEd5bSIsInN0YXJ0X3VybCI6Ii4iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImJhY2tncm91bmRfY29xvciI6IiMwMDAwMDAiLCJ0aGVtZV9jb2xvciI6IiMwMDAwMDAiLCJpY29ucyI6W3sic3JjIjoiaHR0cHM6Ly9jZG4tanNkZWxpdnIubmV0L2doL2x1Y2lkZS1pY29ucy9sdWNpZGUvbG9nby5zdmciLCJzaXplcyI6IjUxMng1MTIiLCJ0eXBlIjoiaW1hZ2Uvc3ZnK3htbCJ9XX0='>

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #000; color: #fff; -webkit-tap-highlight-color: transparent; }
        .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        input[type="number"] { -moz-appearance: textfield; }
        
        /* Ecran de secours (affiché si React plante) */
        #rescue-screen { display: none; padding: 30px; text-align: center; background: #111; height: 100vh; }
        .rescue-btn { background: #ef4444; color: white; padding: 15px; border-radius: 10px; width: 100%; margin-top: 20px; font-weight: bold; }
        .copy-btn { background: #3b82f6; color: white; padding: 15px; border-radius: 10px; width: 100%; margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <!-- ECRAN DE SECOURS MANUEL -->
    <div id="rescue-screen">
        <h1 class="text-3xl font-bold text-red-500 mb-4">MODE DÉPANNAGE V14</h1>
        <p class="text-gray-400 mb-6">L'application n'a pas pu démarrer à cause d'un conflit de données. Pas de panique.</p>
        
        <textarea id="rescue-dump" class="w-full h-48 bg-gray-800 text-xs text-white p-2 rounded mb-4"></textarea>
        
        <button onclick="copyRescue()" class="copy-btn">1. COPIER MES DONNÉES (Sauvegarde)</button>
        <button onclick="hardReset()" class="rescue-btn">2. RÉINITIALISER (Réparer l'écran noir)</button>
    </div>

    <script>
        // --- LOGIQUE DE SECOURS (Hors React) ---
        function showRescue() {
            document.getElementById('root').style.display = 'none';
            document.getElementById('rescue-screen').style.display = 'block';
            
            // Tentative de récupération brute des données
            const keys = ['elite_history', 'eliteHybrid_history', 'elite_programs'];
            let dump = {};
            keys.forEach(k => {
                const val = localStorage.getItem(k);
                if(val) dump[k] = JSON.parse(val);
            });
            document.getElementById('rescue-dump').value = JSON.stringify(dump);
        }

        window.copyRescue = function() {
            const el = document.getElementById('rescue-dump');
            el.select();
            document.execCommand('copy');
            alert("Données copiées ! Tu peux maintenant cliquer sur Réinitialiser, puis 'Importer' dans l'app.");
        }

        window.hardReset = function() {
            if(confirm("Attention, cela va effacer la mémoire de l'application pour la débloquer. As-tu copié tes données avant ?")) {
                localStorage.clear();
                window.location.reload();
            }
        }

        // Si React ne se charge pas après 3s, on lance le secours
        setTimeout(() => {
            if (!document.getElementById('root').hasChildNodes()) {
                showRescue();
            }
        }, 3000);

        // Force update Service Worker
        if ('serviceWorker' in navigator) {
            const CACHE_NAME = 'elite-gym-v14-final';
            self.addEventListener('install', e => self.skipWaiting());
            self.addEventListener('activate', e => e.waitUntil(caches.keys().then(keys => Promise.all(keys.map(k => k !== CACHE_NAME ? caches.delete(k) : null)))));
        }
    </script>

    <script type="module">
        import React, { useState, useEffect } from 'https://esm.sh/react@18.2.0';
        import { createRoot } from 'https://esm.sh/react-dom@18.2.0/client';
        import { 
            Save, Activity, TrendingUp, TrendingDown, Scale, Calendar, 
            ChevronDown, ChevronUp, BarChart2, Dumbbell, History, 
            Flame, BatteryCharging, ArrowRight,
            Plus, Trash2, X, Settings, Edit2, CheckCircle, Minus, Trophy, Database, Copy, Upload, AlertTriangle
        } from 'https://esm.sh/lucide-react@0.263.1';

        // --- COMPOSANT ERREUR (Si React plante pendant l'utilisation) ---
        class ErrorBoundary extends React.Component {
            constructor(props) { super(props); this.state = { hasError: false }; }
            static getDerivedStateFromError(error) { return { hasError: true }; }
            componentDidCatch(error, errorInfo) { console.error(error, errorInfo); }
            render() {
                if (this.state.hasError) {
                    // Appel du mode secours HTML
                    showRescue();
                    return null;
                }
                return this.props.children; 
            }
        }

        function App() {
            // -- RESTAURATION ROBUSTE --
            const safeParse = (key, fallback) => {
                try {
                    const item = localStorage.getItem(key);
                    return item ? JSON.parse(item) : fallback;
                } catch(e) { return fallback; }
            };

            const [history, setHistory] = useState(() => {
                const h = safeParse('elite_history', []);
                if (h.length === 0) return safeParse('eliteHybrid_history', []);
                return h;
            });

            const [programs, setPrograms] = useState(() => {
                const defaults = {
                    PUSH: { id: 'PUSH', title: "Séance Push", color: "from-blue-600 to-cyan-500", exercises: [
                        { id: 'p1', name: 'Développé Couché Barre', sets: '6', reps: '5', target: 'Force' },
                        { id: 'p2', name: 'Développé Couché Incliné', sets: '3', reps: '10', target: 'Haut Pecs' },
                        { id: 'p4', name: 'Extension Triceps', sets: '3', reps: '10', target: 'Triceps' }
                    ]},
                    PULL: { id: 'PULL', title: "Séance Pull", color: "from-emerald-600 to-teal-500", exercises: [
                        { id: 'pu1', name: 'Rowing Barre', sets: '6', reps: '5', target: 'Dos' },
                        { id: 'pu3', name: 'Tractions', sets: '3', reps: '10', target: 'Dos' }
                    ]},
                    HYBRID: { id: 'HYBRID', title: "Séance Crossfit & Legs", color: "from-orange-600 to-red-500", isCircuit: true, circuit: { name: "Le Circuit Infernal", description: "Rowing / SDT / Crunch / Squat" }, isolation: [
                        { id: 'h1', name: 'Leg Curl', sets: '3', reps: '10', target: 'Ischios' },
                        { id: 'h2', name: 'Leg Extension', sets: '3', reps: '10', target: 'Quads' }
                    ]}
                };
                const saved = safeParse('elite_programs', null);
                return saved && saved.HYBRID ? saved : defaults;
            });

            const [userStats, setUserStats] = useState(() => safeParse('elite_userStats', { bodyWeight: '', energy: 3 }));
            
            // Etats UI
            const [activeTab, setActiveTab] = useState('dashboard');
            const [selectedSessionType, setSelectedSessionType] = useState(null);
            const [sessionLogs, setSessionLogs] = useState(() => safeParse('elite_currentSessionLogs', {}));
            const [circuitRounds, setCircuitRounds] = useState(() => localStorage.getItem('elite_circuitRounds') || '');
            
            const [isEditMode, setIsEditMode] = useState(false);
            const [expandedHistoryId, setExpandedHistoryId] = useState(null);
            const [showProgramModal, setShowProgramModal] = useState(false);
            const [newProgramTitle, setNewProgramTitle] = useState("");
            const [showSummary, setShowSummary] = useState(false);
            const [lastSessionSummary, setLastSessionSummary] = useState(null);
            const [showBackupModal, setShowBackupModal] = useState(false);
            const [importString, setImportString] = useState("");
            const [newExoName, setNewExoName] = useState("");

            // Sauvegardes
            useEffect(() => { localStorage.setItem('elite_currentSessionLogs', JSON.stringify(sessionLogs)); }, [sessionLogs]);
            useEffect(() => { localStorage.setItem('elite_history', JSON.stringify(history)); }, [history]);
            useEffect(() => { localStorage.setItem('elite_programs', JSON.stringify(programs)); }, [programs]);
            useEffect(() => { localStorage.setItem('elite_userStats', JSON.stringify(userStats)); }, [userStats]);

            // --- FONCTIONS ---
            const updateSetData = (exId, setIndex, field, value) => {
                setSessionLogs(prev => {
                    const currentExLogs = prev[exId] ? [...prev[exId]] : [];
                    if (!currentExLogs[setIndex]) currentExLogs[setIndex] = {}; 
                    currentExLogs[setIndex] = { ...currentExLogs[setIndex], [field]: value };
                    return { ...prev, [exId]: currentExLogs };
                });
            };

            const getProgressionStatus = (exId) => {
                const currentLogs = sessionLogs[exId];
                if (!currentLogs || currentLogs.length === 0) return null;
                const currentBest = Math.max(...currentLogs.map(l => (parseFloat(l?.weight)||0) * (parseFloat(l?.reps)||0)));
                
                const lastSession = history.slice().reverse().find(h => h.exercises.some(e => e.id === exId));
                if (!lastSession) return 'neutral';
                
                const lastExData = lastSession.exercises.find(e => e.id === exId);
                let lastBest = 0;
                if(lastExData.setsData) lastBest = Math.max(...lastExData.setsData.map(l => (parseFloat(l?.weight)||0) * (parseFloat(l?.reps)||0)));
                else lastBest = (lastExData.weight || 0) * 10;

                if (currentBest > lastBest) return 'better';
                if (currentBest < lastBest) return 'worse';
                return 'neutral';
            };

            const handleFinishSession = () => {
                if (!selectedSessionType) return;
                const prog = programs[selectedSessionType];
                let recordsBroken = 0;
                
                const processExercises = (exList) => {
                    return exList.map(ex => {
                        const logs = sessionLogs[ex.id] || [];
                        const validLogs = logs.filter(l => l && (l.weight || l.reps));
                        const maxWeight = validLogs.length > 0 ? Math.max(...validLogs.map(l => parseFloat(l.weight) || 0)) : 0;
                        if (getProgressionStatus(ex.id) === 'better') recordsBroken++;
                        return { id: ex.id, name: ex.name, setsData: validLogs, weight: maxWeight };
                    });
                };

                const processedExos = prog.isCircuit ? processExercises(prog.isolation || []) : processExercises(prog.exercises || []);
                const newLog = { 
                    id: Date.now(), 
                    date: new Date().toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' }), 
                    type: selectedSessionType, 
                    typeLabel: prog.title, 
                    bodyWeight: userStats.bodyWeight, 
                    energy: userStats.energy, 
                    exercises: processedExos, 
                    circuit: prog.isCircuit ? { rounds: circuitRounds } : null 
                };
                
                setHistory([...history, newLog]);
                setLastSessionSummary({ log: newLog, records: recordsBroken, mainExerciseId: processedExos[0]?.id });
                setShowSummary(true);
                setSessionLogs({}); setCircuitRounds(''); setSelectedSessionType(null);
            };

            // Gestion Programmes
            const handleCreateProgram = () => {
                if (!newProgramTitle) return;
                const id = `PROG_${Date.now()}`;
                setPrograms({ ...programs, [id]: { id, title: newProgramTitle, color: "from-purple-600 to-indigo-500", exercises: [] }});
                setNewProgramTitle(""); setShowProgramModal(false);
            };
            const deleteProgram = (id) => { const u = {...programs}; delete u[id]; setPrograms(u); };
            
            // Gestion Exos
            const addExo = (progId) => {
                if(!newExoName) return;
                const u = {...programs};
                const p = u[progId];
                const list = p.isCircuit ? (p.isolation || (p.isolation=[])) : p.exercises;
                list.push({ id: `EX_${Date.now()}`, name: newExoName, sets: 3, reps: 10 });
                setPrograms(u); setNewExoName("");
            };
            const updateExoName = (progId, exId, name) => {
                const u = {...programs};
                const p = u[progId];
                const list = p.isCircuit ? p.isolation : p.exercises;
                list.find(e => e.id === exId).name = name;
                setPrograms(u);
            };
            const deleteExo = (progId, exId) => {
                if(!confirm("Supprimer ?")) return;
                const u = {...programs};
                const p = u[progId];
                if(p.isCircuit) p.isolation = p.isolation.filter(e => e.id !== exId);
                else p.exercises = p.exercises.filter(e => e.id !== exId);
                setPrograms(u);
            };

            // Import/Export
            const handleExport = () => {
                const data = JSON.stringify({ history, programs, userStats });
                navigator.clipboard.writeText(data).then(() => alert("Données copiées !"));
            };
            const handleImport = () => {
                try {
                    const d = JSON.parse(importString);
                    if(d.history) setHistory(d.history);
                    if(d.programs) setPrograms(d.programs);
                    if(d.userStats) setUserStats(d.userStats);
                    alert("Importé !"); setShowBackupModal(false);
                } catch(e) { alert("Erreur format"); }
            };

            // RENDERERS
            const renderDashboard = () => React.createElement("div", { className: "p-4 space-y-6 animate-fadeIn pb-24" },
                React.createElement("div", { className: "flex justify-between items-center bg-slate-900 border border-slate-800 p-3 rounded-xl" },
                    React.createElement("h2", { className: "text-white font-bold flex items-center gap-2" }, React.createElement(Database, { size: 18, className: "text-blue-400" }), " Données"),
                    React.createElement("button", { onClick: () => setShowBackupModal(true), className: "bg-blue-600 text-white text-xs font-bold px-3 py-2 rounded-lg flex gap-1" }, "Sauvegarde / Transfert")
                ),
                React.createElement("div", { className: "bg-slate-900 border border-slate-800 p-5 rounded-2xl" }, 
                    React.createElement("h2", { className: "text-white font-bold flex items-center gap-2 mb-4" }, React.createElement(BatteryCharging, { className: "text-emerald-400" }), " Forme du jour"),
                    React.createElement("input", { type: "range", min: "1", max: "5", value: userStats.energy, onChange: e => setUserStats({...userStats, energy: parseInt(e.target.value)}), className: "w-full h-2 bg-slate-800 rounded-lg accent-emerald-500" }),
                    React.createElement("div", { className: "text-center text-emerald-400 font-bold mt-2 text-sm" }, `Niveau ${userStats.energy}/5`)
                ),
                React.createElement("div", { className: "space-y-3" },
                    React.createElement("div", { className: "flex justify-between items-center" }, React.createElement("h3", { className: "text-gray-500 text-xs font-bold uppercase ml-1" }, "Mes Programmes"), React.createElement("button", { onClick: () => setShowProgramModal(true), className: "bg-blue-600/20 text-blue-400 p-1 rounded" }, React.createElement(Plus, { size: 16 }))),
                    Object.entries(programs).map(([key, prog]) => React.createElement("div", { key: key, className: "relative group" },
                        React.createElement("button", { onClick: () => { setSelectedSessionType(key); setActiveTab('session'); }, className: `w-full p-4 rounded-xl bg-gradient-to-r ${prog.color} text-white font-bold shadow-lg flex justify-between items-center text-left` },
                            React.createElement("div", null, React.createElement("span", null, prog.title), React.createElement("p", { className: "text-[10px] opacity-70 font-normal mt-1" }, prog.isCircuit ? "Circuit" : `${((prog.exercises||[]).length)} Exos`)), React.createElement(ArrowRight, { className: "opacity-60" })
                        ),
                        React.createElement("button", { onClick: (e) => { e.stopPropagation(); if(confirm("Supprimer ?")) deleteProgram(key); }, className: "absolute top-2 right-2 p-2 bg-black/20 rounded-full text-white" }, React.createElement(Trash2, { size: 14 }))
                    ))
                )
            );

            const renderSession = () => {
                const prog = programs[selectedSessionType];
                if (!prog) return null;
                const list = prog.isCircuit ? (prog.isolation || []) : (prog.exercises || []);
                return React.createElement("div", { className: "p-4 pb-24 animate-slideIn" },
                    React.createElement("div", { className: "mb-6 flex justify-between items-start" },
                        React.createElement("div", null, React.createElement("button", { onClick: () => { setSelectedSessionType(null); setIsEditMode(false); }, className: "text-xs text-gray-500 mb-2" }, "← Retour"), React.createElement("h2", { className: "text-2xl font-bold text-white leading-tight" }, prog.title)),
                        React.createElement("button", { onClick: () => setIsEditMode(!isEditMode), className: `p-2 rounded-full ${isEditMode ? 'bg-blue-600 text-white' : 'bg-slate-800 text-gray-400'}` }, React.createElement(Settings, { size: 18 }))
                    ),
                    React.createElement("div", { className: "space-y-6" },
                        prog.isCircuit && React.createElement("div", { className: "bg-slate-900 border border-orange-900/50 p-5 rounded-xl shadow-lg" }, React.createElement("h3", { className: "text-lg font-bold text-orange-400 flex items-center gap-2 mb-2" }, React.createElement(Flame, { fill: "currentColor" }), " ", prog.circuit.name), React.createElement("div", { className: "bg-black/50 p-4 rounded-lg text-center" }, React.createElement("label", { className: "text-xs text-gray-500 uppercase font-bold block mb-2" }, "Tours"), React.createElement("input", { type: "number", value: circuitRounds, onChange: e => setCircuitRounds(e.target.value), className: "bg-transparent text-center text-4xl font-black text-white w-full focus:outline-none" }))),
                        list.map(ex => {
                            const status = getProgressionStatus(ex.id);
                            return React.createElement("div", { key: ex.id, className: "bg-slate-900 border border-slate-800 rounded-xl overflow-hidden relative" },
                                isEditMode && React.createElement("button", { onClick: () => deleteExo(selectedSessionType, ex.id), className: "absolute top-2 right-2 bg-red-900/80 text-white p-1 rounded-full z-10" }, React.createElement(Trash2, { size: 14 })),
                                React.createElement("div", { className: "bg-slate-800/50 p-3 flex justify-between items-center" },
                                    isEditMode ? React.createElement("input", { value: ex.name, onChange: e => updateExoName(selectedSessionType, ex.id, e.target.value), className: "bg-black border border-slate-600 rounded p-1 text-sm text-white w-full mr-8" }) : 
                                    React.createElement("div", { className: "flex items-center gap-2" }, React.createElement("h3", { className: "font-bold text-gray-200 text-sm" }, ex.name), status === 'better' && React.createElement(TrendingUp, { size: 16, className: "text-green-500" }), status === 'worse' && React.createElement(TrendingDown, { size: 16, className: "text-red-500" })),
                                    !isEditMode && React.createElement("span", { className: "text-[10px] text-gray-400 bg-slate-800 px-2 py-1 rounded" }, `${ex.sets}x${ex.reps}`)
                                ),
                                React.createElement("div", { className: "p-2 space-y-2" },
                                    React.createElement("div", { className: "grid grid-cols-8 gap-1 text-[9px] uppercase text-gray-500 font-bold px-2 text-center" }, React.createElement("div", { className: "col-span-1" }, "#"), React.createElement("div", { className: "col-span-4" }, "Kg"), React.createElement("div", { className: "col-span-3" }, "Reps")),
                                    Array.from({length: parseInt(ex.sets)||3}).map((_, i) => {
                                        const val = (sessionLogs[ex.id] && sessionLogs[ex.id][i]) || {};
                                        return React.createElement("div", { key: i, className: "grid grid-cols-8 gap-1 items-center" },
                                            React.createElement("div", { className: "col-span-1 flex justify-center" }, React.createElement("div", { className: "w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center text-xs text-gray-400 font-bold" }, i+1)),
                                            React.createElement("div", { className: "col-span-4" }, React.createElement("input", { type: "number", placeholder: "-", value: val.weight||'', onChange: e => updateSetData(ex.id, i, 'weight', e.target.value), className: "w-full bg-black border border-slate-700 rounded p-2 text-center text-white font-bold focus:border-blue-500 outline-none text-sm" })),
                                            React.createElement("div", { className: "col-span-3" }, React.createElement("input", { type: "number", placeholder: "-", value: val.reps||'', onChange: e => updateSetData(ex.id, i, 'reps', e.target.value), className: "w-full bg-black border border-slate-700 rounded p-2 text-center text-blue-400 font-bold focus:border-blue-500 outline-none text-sm" }))
                                        );
                                    })
                                )
                            );
                        }),
                        isEditMode && React.createElement("div", { className: "bg-slate-800/50 p-4 rounded-xl border border-dashed border-slate-600 flex gap-2" }, React.createElement("input", { placeholder: "Nouvel exercice...", value: newExoName, onChange: e => setNewExoName(e.target.value), className: "flex-1 bg-black border border-slate-600 rounded p-2 text-sm text-white" }), React.createElement("button", { onClick: () => addExo(selectedSessionType), className: "bg-blue-600 text-white px-4 rounded font-bold text-sm" }, "+"))
                    ),
                    React.createElement("button", { onClick: handleFinishSession, className: "w-full mt-8 bg-white text-black font-black py-4 rounded-xl shadow-xl hover:bg-gray-200" }, React.createElement(Save, { size: 20 }), " TERMINER")
                );
            };

            const renderHistory = () => React.createElement("div", { className: "p-4 space-y-4 pb-24" },
                React.createElement("div", { className: "flex justify-between items-center mb-4" }, React.createElement("h2", { className: "text-white font-bold text-xl" }, "Historique"), React.createElement("button", { onClick: () => { if(confirm("Effacer ?")) setHistory([]); }, className: "text-red-500 text-xs flex gap-1 border border-red-900 bg-red-900/10 px-3 py-2 rounded-lg" }, React.createElement(Trash2, { size: 14 }), " Reset")),
                history.slice().reverse().map(h => React.createElement("div", { key: h.id, className: "bg-slate-900 p-4 rounded-xl border-l-4 border-slate-700" }, 
                    React.createElement("div", { className: "flex justify-between items-center", onClick: () => setExpandedHistoryId(expandedHistoryId === h.id ? null : h.id) },
                        React.createElement("div", null, React.createElement("span", { className: "block font-bold text-white" }, h.typeLabel || h.type), React.createElement("span", { className: "text-xs text-gray-400" }, h.date)),
                        React.createElement("div", null, h.bodyWeight && React.createElement("span", { className: "text-xs text-pink-400 bg-pink-900/20 px-2 py-1 rounded" }, `${h.bodyWeight}kg`))
                    ),
                    expandedHistoryId === h.id && React.createElement("div", { className: "mt-4 pt-4 border-t border-slate-800 space-y-3" },
                        h.circuit && React.createElement("div", { className: "text-orange-400 text-sm font-bold" }, `Circuit : ${h.circuit.rounds} Tours`),
                        h.exercises.map((ex, i) => React.createElement("div", { key: i, className: "text-sm" },
                            React.createElement("div", { className: "font-bold text-gray-300" }, ex.name),
                            ex.setsData ? React.createElement("div", { className: "flex flex-wrap gap-2 mt-1" }, ex.setsData.map((s, j) => React.createElement("span", { key: j, className: "bg-black px-2 py-1 rounded text-xs text-gray-500 border border-slate-800" }, `${s.weight}kg x ${s.reps}`))) : React.createElement("span", { className: "text-xs text-gray-600" }, `Max: ${ex.weight}kg`)
                        ))
                    )
                ))
            );

            // Modals
            const renderSummary = () => React.createElement("div", { className: "fixed inset-0 bg-black/95 z-50 overflow-y-auto animate-fadeIn" }, React.createElement("div", { className: "p-6 min-h-screen flex flex-col items-center justify-center text-center space-y-6" }, React.createElement(Trophy, { size: 64, className: "text-yellow-400 animate-pop" }), React.createElement("h2", { className: "text-3xl font-black text-white italic" }, "SÉANCE TERMINÉE"), React.createElement("div", { className: "bg-slate-900 p-4 rounded-xl border border-slate-800 w-full" }, React.createElement("p", { className: "text-xs text-gray-500 uppercase" }, "Records Battus"), React.createElement("p", { className: "text-2xl font-bold text-green-400" }, `+${lastSessionSummary?.records || 0}`)), React.createElement("button", { onClick: () => { setShowSummary(false); setActiveTab('dashboard'); }, className: "w-full bg-white text-black font-black py-4 rounded-xl shadow-xl hover:bg-gray-200 mt-4" }, "RETOUR ACCUEIL")));
            const renderCreateModal = () => React.createElement("div", { className: "fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4" }, React.createElement("div", { className: "bg-slate-900 w-full max-w-md rounded-2xl border border-slate-700 p-6 space-y-4" }, React.createElement("h3", { className: "text-white font-bold text-lg" }, "Nouveau Programme"), React.createElement("input", { placeholder: "Nom", value: newProgramTitle, onChange: e => setNewProgramTitle(e.target.value), className: "w-full bg-black border border-slate-700 rounded p-3 text-white" }), React.createElement("div", { className: "flex gap-2" }, React.createElement("button", { onClick: () => setShowProgramModal(false), className: "flex-1 text-slate-400 py-3" }, "Annuler"), React.createElement("button", { onClick: handleCreateProgram, className: "flex-1 bg-blue-600 text-white font-bold rounded-xl py-3" }, "Créer"))));
            const renderBackupModal = () => React.createElement("div", { className: "fixed inset-0 bg-black/95 z-50 flex flex-col items-center justify-center p-6" }, React.createElement("div", { className: "bg-slate-900 w-full max-w-md rounded-2xl border border-slate-700 p-6 space-y-6" }, React.createElement("div", { className: "flex justify-between items-center" }, React.createElement("h3", { className: "text-white font-bold text-lg" }, "Transfert Données"), React.createElement("button", { onClick: () => setShowBackupModal(false) }, React.createElement(X, { className: "text-gray-400" }))), React.createElement("div", { className: "space-y-4" }, React.createElement("button", { onClick: handleExport, className: "w-full bg-slate-800 hover:bg-slate-700 text-white p-4 rounded-xl flex items-center justify-between border border-slate-600" }, React.createElement("span", { className: "flex items-center gap-2" }, React.createElement(Copy, { size: 18 }), " Copier mes données"), React.createElement("span", { className: "text-xs bg-blue-900 text-blue-300 px-2 py-1 rounded" }, "COPIER")), React.createElement("div", { className: "border-t border-slate-800 pt-4" }, React.createElement("p", { className: "text-sm text-gray-400 mb-2" }, "Coller ici pour restaurer :"), React.createElement("textarea", { value: importString, onChange: e => setImportString(e.target.value), className: "w-full bg-black border border-slate-700 rounded-xl p-3 text-xs text-gray-300 h-24 mb-2 font-mono" }), React.createElement("button", { onClick: handleImport, className: "w-full bg-blue-600 hover:bg-blue-500 text-white font-bold p-3 rounded-xl flex items-center justify-center gap-2" }, React.createElement(Upload, { size: 18 }), " IMPORTER")))));

            return React.createElement("div", { className: "min-h-screen bg-black text-slate-200 font-sans" },
                React.createElement("div", { className: "bg-slate-950/80 backdrop-blur-md sticky top-0 z-40 px-4 py-3 border-b border-slate-900 flex justify-between items-center" }, React.createElement("h1", { className: "font-black text-lg italic bg-gradient-to-r from-white to-slate-500 bg-clip-text text-transparent" }, "ELITE HYBRID v14"), React.createElement("div", { className: "flex items-center gap-2" }, React.createElement("span", { className: "text-xs font-mono text-gray-500" }, new Date().toLocaleDateString()))),
                React.createElement("div", { className: "mx-auto max-w-md" }, 
                    activeTab === 'dashboard' && !selectedSessionType && renderDashboard(),
                    activeTab === 'session' && selectedSessionType && renderSession(),
                    activeTab === 'analysis' && React.createElement("div", {className: "p-4 text-center text-gray-500"}, "Stats bientôt dispo"),
                    activeTab === 'history' && renderHistory()
                ),
                showSummary && renderSummary(),
                showProgramModal && renderCreateModal(),
                showBackupModal && renderBackupModal(),
                !selectedSessionType && !showSummary && !showProgramModal && !showBackupModal && React.createElement("div", { className: "fixed bottom-0 left-0 right-0 bg-slate-950 border-t border-slate-900 p-2 flex justify-around pb-6 z-40" }, React.createElement(NavBtn, { icon: React.createElement(Activity, null), label: "Workout", active: activeTab === 'dashboard', onClick: () => setActiveTab('dashboard') }), React.createElement(NavBtn, { icon: React.createElement(TrendingUp, null), label: "Stats", active: activeTab === 'analysis', onClick: () => setActiveTab('analysis') }), React.createElement(NavBtn, { icon: React.createElement(History, null), label: "Journal", active: activeTab === 'history', onClick: () => setActiveTab('history') }))
            );
        }

        function NavBtn({ icon, label, active, onClick }) { return React.createElement("button", { onClick: onClick, className: `flex flex-col items-center p-2 rounded-lg transition-colors ${active ? 'text-white' : 'text-slate-600'}` }, React.cloneElement(icon, { size: 24 }), React.createElement("span", { className: "text-[10px] font-bold uppercase mt-1" }, label)); }
        
        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(ErrorBoundary, null, React.createElement(App)));
    </script>
</body>
</html>
